<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Ø«Ø¨Øª Ø­Ø¶ÙˆØ± Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨</title>
    <style>
      body { font-family: sans-serif; text-align: center; padding: 50px; direction: rtl; }
      input, select, button { margin: 10px; padding: 10px; font-size: 16px; }
    </style>
  </head>
  <body>
    <h2>Ø«Ø¨Øª Ø­Ø¶ÙˆØ± Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨</h2>

    <label>Ú©Ø¯ Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨:</label><br>
    <input type="text" id="code" placeholder="Ù…Ø«Ù„Ø§Ù‹ 123"><br>

    <label>Ù†ÙˆØ¹ Ø´ÛŒÙØª:</label><br>
    <select id="type">
      <option value="Ø´Ø±ÙˆØ¹ Ø´ÛŒÙØª">Ø´Ø±ÙˆØ¹ Ø´ÛŒÙØª</option>
      <option value="Ù¾Ø§ÛŒØ§Ù† Ø´ÛŒÙØª">Ù¾Ø§ÛŒØ§Ù† Ø´ÛŒÙØª</option>
    </select><br>

    <button onclick="getLocation()">ğŸ“ Ø«Ø¨Øª Ø­Ø¶ÙˆØ± Ø¨Ø§ GPS</button>

    <p id="status"></p>

    <script>
      function getLocation() {
        document.getElementById("status").innerText = "Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª...";
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(sendForm, showError, {timeout: 10000});
        } else {
          document.getElementById("status").innerText = "Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ù…Ú©Ø§Ù†â€ŒÛŒØ§Ø¨ÛŒ Ø±Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.";
        }
      }

      function sendForm(position) {
        const code = document.getElementById("code").value.trim();
        const type = document.getElementById("type").value;
        const lat = position.coords.latitude.toFixed(6);
        const lon = position.coords.longitude.toFixed(6);

        if (!code) {
          document.getElementById("status").innerText = "Ù„Ø·ÙØ§Ù‹ Ú©Ø¯ Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.";
          return;
        }

        const form = new FormData();
        form.append("entry.1655541032", type);
        form.append("entry.1228562108", code);
        form.append("entry.2093256559", `${lat}, ${lon}`);

        fetch("https://docs.google.com/forms/d/e/1FAIpQLSdY70VGHakFIzh9zjWbfZ2T-tBqUg3xtNEZwG4drNpjnbwrjg/formResponse", {
          method: "POST",
          mode: "no-cors",
          body: form,
        }).then(() => {
          document.getElementById("status").innerText = "âœ… Ø­Ø¶ÙˆØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯.";
        }).catch((error) => {
          document.getElementById("status").innerText = "âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª.";
          console.error(error);
        });
      }

      function showError(error) {
        document.getElementById("status").innerText = "âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª: " + error.message;
      }
    </script>
  </body>
</html>
