<script>
  function toJalali(gy, gm, gd) {
    var g_d_m = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
    var gy2 = (gm > 2) ? (gy + 1) : gy;
    var days = 355666 + (365 * gy) + parseInt((gy2 + 3) / 4) - parseInt((gy2 + 99) / 100) + parseInt((gy2 + 399) / 400) + gd + g_d_m[gm - 1];
    var jy = -1595 + (33 * parseInt(days / 12053));
    days %= 12053;
    jy += 4 * parseInt(days / 1461);
    days %= 1461;
    if (days > 365) {
      jy += parseInt((days - 1) / 365);
      days = (days - 1) % 365;
    }
    var jm = (days < 186) ? 1 + parseInt(days / 31) : 7 + parseInt((days - 186) / 30);
    var jd = 1 + ((days < 186) ? (days % 31) : ((days - 186) % 30));
    return [jy, jm, jd];
  }

  function getFormattedPersianDate() {
    const now = new Date();
    const days = ['یکشنبه', 'دوشنبه', 'سه‌شنبه', 'چهارشنبه', 'پنجشنبه', 'جمعه', 'شنبه'];
    const months = ['فروردین', 'اردیبهشت', 'خرداد', 'تیر', 'مرداد', 'شهریور', 'مهر', 'آبان', 'آذر', 'دی', 'بهمن', 'اسفند'];
    const stickers = ['🌞', '🌜', '🌛', '🌚', '🌝', '⭐', '🌟'];

    const [jy, jm, jd] = toJalali(now.getFullYear(), now.getMonth() + 1, now.getDate());
    const persianDayIndex = (now.getDay() + 6) % 7;
    const persianWeekday = days[persianDayIndex];
    return `${persianWeekday} ${jd} ${months[jm - 1]} ${jy} ${stickers[persianDayIndex]}`;
  }

  function logResult(success, marketerName, spotName) {
    const resultDiv = document.getElementById("resultLog");
    const persianDate = getFormattedPersianDate();
    const message = success
      ? `✅ ثبت موفق حضور در اسپات "${spotName}" برای بازاریاب "${marketerName}"`
      : `❌ ثبت ناموق حضور در اسپات "${spotName}" برای بازاریاب "${marketerName}";

    const p = document.createElement("p");
    p.textContent = message;
    p.style.color = success ? "green" : "red";
    resultDiv.appendChild(p);
  }

  // برای نمونه تست
  // می‌تونی در جاهایی که اسپات‌ها ثبت می‌شن این تابع رو فراخوانی کنی:
  // logResult(true, "علیرضا احمدی", "میدان آزادی");
  // logResult(false, "سحر رضایی", "ولیعصر");

  // مثال تست برای اجرا شدن خودکار:
  window.onload = function() {
    logResult(true, "علیرضا احمدی", "میدان آزادی");
    logResult(false, "سحر رضایی", "ولیعصر");
  };
</script>

<!-- ناحیه برای نمایش پیام‌ها -->
<div id="resultLog" style="font-family: sans-serif; margin-top: 20px;"></div>
